import T from "../../translations/index.js";

/**
 * Renders a minimal HTML password form for password-protected share links.
 * The form submits the password to the current URL via POST.
 */
export const renderPasswordForm = () => {
	return `<!doctypehtml><html lang="en"><meta charset="utf-8"><meta content="width=device-width,initial-scale=1"name="viewport"><link href="/admin/assets/favicon.ico"rel="shortcut icon"type="image/ico"><title>Protected Share</title><style>:root{--primary-base:#C1FE77;--primary-hover:#D0FF96;--primary-contrast:#131313;--background-base:#171717;--card-base:#171717;--input-base:#212121;--title:#F1F1F1;--body:#a1a1a1;--border:rgba(255, 255, 255, 0.1)}*{box-sizing:border-box}body,html{height:100%}body{margin:0;min-height:100vh;background:var(--background-base);color:var(--body);font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,sans-serif}.page{min-height:100vh;width:100%;padding:16px 16px 0 16px;display:flex;align-items:stretch;justify-content:stretch}.page__backdrop{border:1px solid var(--border);border-bottom:0;border-top-left-radius:16px;border-top-right-radius:16px;background:#0a0a0a;background-image:radial-gradient(900px 600px at 5% 0,rgba(193,254,119,.07),transparent 60%),radial-gradient(800px 500px at 100% 100%,rgba(208,255,150,.05),transparent 60%);box-shadow:0 10px 30px rgba(0,0,0,.35);width:100%;display:flex;align-items:center;justify-content:center}.page__content{width:100%;max-width:600px;margin:0 auto;padding:48px 24px 64px;text-align:center}.hero{margin-bottom:40px}.hero__title{color:#f1f1f1;font-weight:700;font-size:18px;line-height:28px;margin:0 0 4px}.hero__description{color:var(--body);font-size:16px;line-height:24px;max-width:28rem;margin:0 auto}.cta-section{margin-top:0;max-width:520px;margin-left:auto;margin-right:auto}.cta-section__card{margin-top:0;background:var(--card-base);border:1px solid var(--border);border-radius:8px;padding:24px;text-align:left}.form-field{display:flex;flex-direction:column;transition:border-color .2s ease;position:relative;background:var(--input-base);border:1px solid var(--border);border-radius:8px}.form-field--error{border-color:#f75555}.form-field__label{font-size:14px;color:#f1f1f1;padding:8px 8px 0;display:block;text-align:left}.form-field:focus-within{border-color:var(--primary-base);border:1px solid var(--primary-base)}.form-field:focus-within .form-field__label{color:var(--primary-base)}.input{border:0;background:0 0;color:#f1f1f1;font-size:14px;outline:0;line-height:20px;padding:4px 8px 8px 8px}.button{display:inline-flex;align-items:center;justify-content:center;gap:8px;width:100%;border:1px solid var(--border);background:var(--primary-base);color:var(--primary-contrast);border-radius:10px;padding:12px 14px;height:48px;font-size:14px;font-weight:600;text-decoration:none;transition:background-color .2s,transform .05s ease;margin-top:12px}.button:focus,.button:focus-visible,.button:hover{background:var(--primary-hover);outline:0}.error-message{display:none;color:#f75555;font-size:13px;margin:12px 0 0}</style><main class="page"><div class="page__backdrop"><div class="page__content"><div class="hero"><h1 class="hero__title">${T("enter_password") || "Enter Password"}</h1><p class="hero__description">Please enter the password to gain access to this media</div><div class="cta-section"><div class="cta-section__card"><form id="share-form"><div class="form-field"id="form-field"><label class="form-field__label"for="password-input">Password</label><input autofocus class="input"id="password-input"name="password"required type="password"></div><div class="error-message"id="err">${T("share_link_incorrect_password_message")}</div><button class="button"type="submit">${T("continue") || "Continue"}</button></form></div></div></div></div></main><script>document.getElementById('share-form').addEventListener('submit', async function (e) { e.preventDefault(); const input = this.querySelector('input[name=\"password\"]'); const field = document.getElementById('form-field'); const err = document.getElementById('err'); const password = input ? input.value : ''; if (err) { err.style.display = 'none' } if (field) { field.classList.remove('form-field--error') } try { const res = await fetch(window.location.href, { method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify({ password }) }); if (res.ok) { window.location.reload(); return; } if (res.status === 401) { if (err) { err.style.display = 'block' } if (field) { field.classList.add('form-field--error') } if (input) { input.focus() } return; } alert('An error occurred.'); } catch (ex) { alert('An error occurred.'); } });</script>`;
};

/**
 * Renders a minimal HTML error page for share link failures.
 * Displays a title, message, and a "Go back" button.
 */
export const renderErrorPage = (title: string, message: string) => {
	return `<!doctypehtml><html lang="en"><meta charset="utf-8"><meta content="width=device-width,initial-scale=1"name="viewport"><link href="/admin/assets/favicon.ico"rel="shortcut icon"type="image/ico"><title>${title}</title><style>:root{--primary-base:#C1FE77;--primary-hover:#D0FF96;--primary-contrast:#131313;--background-base:#171717;--card-base:#171717;--title:#F1F1F1;--body:#a1a1a1;--border:rgba(255, 255, 255, 0.1)}*{box-sizing:border-box}body,html{height:100%}body{margin:0;min-height:100vh;background:var(--background-base);color:var(--body);font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,sans-serif}.page{min-height:100vh;width:100%;padding:16px 16px 0 16px;display:flex;align-items:stretch;justify-content:stretch}.page__backdrop{border:1px solid var(--border);border-bottom:0;border-top-left-radius:16px;border-top-right-radius:16px;background:#0a0a0a;background-image:radial-gradient(900px 600px at 5% 0,rgba(193,254,119,.07),transparent 60%),radial-gradient(800px 500px at 100% 100%,rgba(208,255,150,.05),transparent 60%);box-shadow:0 10px 30px rgba(0,0,0,.35);width:100%;display:flex;align-items:center;justify-content:center}.page__content{width:100%;max-width:600px;margin:0 auto;padding:48px 24px 64px;text-align:center}.hero{margin-bottom:40px}.hero__title{color:var(--title);font-weight:700;font-size:18px;line-height:28px;margin:0 0 4px}.hero__description{color:var(--body);font-size:16px;line-height:24px;max-width:28rem;margin:0 auto}.cta-section{margin-top:0;max-width:520px;margin-left:auto;margin-right:auto}.cta-section__card{margin-top:0;background:var(--card-base);border:1px solid var(--border);border-radius:8px;padding:24px;text-align:left}.button{display:inline-flex;align-items:center;justify-content:center;gap:8px;width:100%;border:1px solid var(--border);background:var(--primary-base);color:var(--primary-contrast);border-radius:10px;padding:12px 14px;height:48px;font-size:14px;font-weight:600;text-decoration:none;transition:background-color .2s,transform .05s ease}.button:focus,.button:focus-visible,.button:hover{background:var(--primary-hover);outline:0}</style><main class="page"><div class="page__backdrop"><div class="page__content"><div class="hero"><h1 class="hero__title">${title}</h1><p class="hero__description">${message}</div><div class="cta-section"><div class="cta-section__card"><a class="button"href="#"onclick="return history.back(),!1">${T("go_back") || "Go back"}</a></div></div></div></div></main>`;
};
